

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title> Metrics &mdash; php-opencloud 1.12.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="php-opencloud 1.12.1 documentation" href="../../index.html"/>
        <link rel="up" title="Monitoring v1" href="index.html"/>
        <link rel="next" title="Notifications" href="notifications.html"/>
        <link rel="prev" title="Changelogs" href="changelogs.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../index.html" class="fa fa-home"> php-opencloud</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../autoscale/index.html">Auto Scale v2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../autoscale/index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoscale/index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoscale/index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoscale/index.html#further-links">Further Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../compute/index.html">Compute v2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../compute/index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compute/index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compute/index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compute/index.html#further-links">Further Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../database/index.html">Databases v1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../database/index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/index.html#further-links">Further Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dns/index.html">DNS v1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dns/index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dns/index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dns/index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dns/index.html#further-links">Further Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../identity/index.html">Identity v2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../identity/index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../identity/index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../identity/index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../identity/index.html#further-links">Further Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../image/index.html">Images v1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../image/index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../image/index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../image/index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../image/index.html#further-links">Further Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../load-balancer/index.html">Load Balancer v1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../load-balancer/index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../load-balancer/index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../load-balancer/index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../load-balancer/index.html#further-links">Further Links</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Monitoring v1</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#setup">Setup</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#further-links">Further links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Networking v2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html#further-links">Further links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../object-store/index.html">Object Store v1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../object-store/index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../object-store/index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../object-store/index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../object-store/index.html#further-links">Further links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../orchestration/index.html">Orchestration v1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../orchestration/index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../orchestration/index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../orchestration/index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../orchestration/index.html#further-links">Further links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../queues/index.html">Queues v1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../queues/index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../queues/index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../queues/index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../queues/index.html#further-links">Further links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../volume/index.html">Volumes v1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../volume/index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../volume/index.html#operations">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../volume/index.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../volume/index.html#further-links">Further links</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../debugging.html">Debugging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../debugging.html#strategy-1-meaningful-exception-handling">Strategy 1: Meaningful exception handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debugging.html#strategy-2-wire-logging">Strategy 2: Wire logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../caching-creds.html">Caching credentials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../caching-creds.html#filesystem-example">Filesystem example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../iterators.html">Iterators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../iterators.html#common-behaviour">Common behaviour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../iterators.html#very-important-note">Very important note</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../iterators.html#using-paginated-collections">Using paginated collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../iterators.html#setting-up-a-paginatediterator">Setting up a PaginatedIterator</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../regions.html">Rackspace regions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../url-types.html">URL types</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../url-types.html#internalurl">internalURL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../url-types.html#publicurl">publicURL</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../logging.html">Logging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../logging.html#logger-injection">Logger injection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../http-clients.html">HTTP Clients</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../http-clients.html#default-http-headers">Default HTTP headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../http-clients.html#user-agents">User agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../http-clients.html#other-functionality">Other functionality</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../auth.html">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../auth.html#service-catalog">Service Catalog</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">php-opencloud</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Monitoring v1</a> &raquo;</li>
      
    <li>&nbsp;Metrics</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/services/monitoring/metrics.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="metrics">
<h1>&nbsp;Metrics<a class="headerlink" href="#metrics" title="Permalink to this headline">¶</a></h1>
<p>When Monitoring checks run, they generate metrics. These metrics are
stored as full resolution data points in the Cloud Monitoring system.
Full resolution data points are periodically rolled up (condensed) into
coarser data points.</p>
<p>Depending on your needs, you can use the metrics API to fetch individual
data points (fine-grained) or rolled up data points (coarse-grained)
over a period of time.</p>
<div class="section" id="data-granularity">
<h2>Data Granularity<a class="headerlink" href="#data-granularity" title="Permalink to this headline">¶</a></h2>
<p>Cloud Monitoring supports several granularities of data: full resolution
data and rollups computed at 5, 20, 60, 240 and 1440 minute intervals.</p>
<p>When you fetch metrics data points, you specify several parameters to
control the granularity of data returned:</p>
<ul class="simple">
<li>A time range for the points</li>
<li>Either the number of points you want returned OR the resolution of
the data you want returned</li>
</ul>
<p>When you query by points, the API selects the resolution that will
return you the number of points you requested. The API makes the
assumption of a 30 second frequency, performs the calculation, and
selects the appropriate resolution.</p>
<p><strong>Note:</strong> Because the API performs calculations to determine the points
returned for a particular resolution, the number of points returned may
differ from the specific number of points you request.</p>
<p>Consider that you want to query data for a 48-hour time range between
the timestamps <tt class="docutils literal"><span class="pre">from=1354647221000</span></tt> and <tt class="docutils literal"><span class="pre">to=1358794421000</span></tt> (
<strong>specified in Unix time, based on the number of milliseconds that have
elapsed since January 1, 1970</strong> ). The following table shows the number
of points that the API returns for a given resolution.</p>
<div class="section" id="specifying-resolution-to-retrieve-data-in-48-hour-period">
<h3>Specifying resolution to retrieve data in 48 hour period<a class="headerlink" href="#specifying-resolution-to-retrieve-data-in-48-hour-period" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="54%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">You specify resolution...</th>
<th class="head">API returns points...</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>FULL</td>
<td>5760</td>
</tr>
<tr class="row-odd"><td>MIN5</td>
<td>576</td>
</tr>
<tr class="row-even"><td>MIN20</td>
<td>144</td>
</tr>
<tr class="row-odd"><td>MIN60</td>
<td>48</td>
</tr>
<tr class="row-even"><td>MIN240</td>
<td>12</td>
</tr>
<tr class="row-odd"><td>MIN1440</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="specifying-number-of-points-to-retrieve-data-in-48-hour-period">
<h3>Specifying number of points to retrieve data in 48 hour period<a class="headerlink" href="#specifying-number-of-points-to-retrieve-data-in-48-hour-period" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="57%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">You specify points in the range...</th>
<th class="head">API calculates resolution</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>3168-∞</td>
<td>FULL</td>
</tr>
<tr class="row-odd"><td>360-3167</td>
<td>MIN5</td>
</tr>
<tr class="row-even"><td>96-359</td>
<td>MIN20</td>
</tr>
<tr class="row-odd"><td>30-95</td>
<td>MIN60</td>
</tr>
<tr class="row-even"><td>7-29</td>
<td>MIN240</td>
</tr>
<tr class="row-odd"><td>0-6</td>
<td>MIN1440</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="data-point-expiration">
<h3>Data Point Expiration<a class="headerlink" href="#data-point-expiration" title="Permalink to this headline">¶</a></h3>
<p>Cloud Monitoring expires data points according to the following
schedule:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Resolution</th>
<th class="head">Expiration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>FULL</td>
<td>2 days</td>
</tr>
<tr class="row-odd"><td>MIN5</td>
<td>7 days</td>
</tr>
<tr class="row-even"><td>MIN20</td>
<td>15 days</td>
</tr>
<tr class="row-odd"><td>MIN60</td>
<td>30 days</td>
</tr>
<tr class="row-even"><td>MIN240</td>
<td>60 days</td>
</tr>
<tr class="row-odd"><td>MIN1440</td>
<td>365 days</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>In order to interact with this feature, you must first retrieve an entity by
its ID:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$entity</span> <span class="o">=</span> <span class="nv">$service</span><span class="o">-&gt;</span><span class="na">getEntity</span><span class="p">(</span><span class="s1">&#39;{entityId}&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>and then a particular check, about which you can configure alarms:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$check</span> <span class="o">=</span> <span class="nv">$entity</span><span class="o">-&gt;</span><span class="na">getCheck</span><span class="p">(</span><span class="s1">&#39;{checkId}&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>For more information about these resource types, please consult the documentation
about <a class="reference external" href="entities">entities</a> and <a class="reference external" href="checks">checks</a>.</p>
</div>
<div class="section" id="list-all-metrics">
<h2>List all metrics<a class="headerlink" href="#list-all-metrics" title="Permalink to this headline">¶</a></h2>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$metrics</span> <span class="o">=</span> <span class="nv">$check</span><span class="o">-&gt;</span><span class="na">getMetrics</span><span class="p">();</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$metrics</span> <span class="k">as</span> <span class="nv">$metric</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$metric</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="fetch-data-points">
<h2>Fetch data points<a class="headerlink" href="#fetch-data-points" title="Permalink to this headline">¶</a></h2>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$data</span> <span class="o">=</span> <span class="nv">$check</span><span class="o">-&gt;</span><span class="na">fetchDataPoints</span><span class="p">(</span><span class="s1">&#39;mzdfw.available&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;resolution&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;FULL&#39;</span><span class="p">,</span>
    <span class="s1">&#39;from&#39;</span>       <span class="o">=&gt;</span> <span class="mi">1369756378450</span><span class="p">,</span>
    <span class="s1">&#39;to&#39;</span>         <span class="o">=&gt;</span> <span class="mi">1369760279018</span>
<span class="p">));</span>
</pre></div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="notifications.html" class="btn btn-neutral float-right" title="Notifications"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="changelogs.html" class="btn btn-neutral" title="Changelogs"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Jamie Hannaford, Shaunak Kashyap.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.12.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>